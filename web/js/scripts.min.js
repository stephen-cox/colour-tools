$("#colour-palette-tools").length>0&&$(function(){function t(){var t=a.val(),e=s.val(),n=r.val();i.css("background-color","hsl("+t+", "+e+"%, "+n+"%)"),o()}function e(){var t=l.val(),e=u.val(),n=d.val();i.css("background-color","rgb("+t+", "+e+", "+n+")"),o()}function o(){n=chroma(i.css("background-color"));var t=n.get("hsl.h"),e=100*n.get("hsl.s"),o=100*n.get("hsl.l"),p=n.get("rgb.r"),m=n.get("rgb.g"),g=n.get("rgb.b");a.update(t,n),s.update(e,n),r.update(o,n),l.update(p,n),u.update(m,n),d.update(g,n),h.text(n.hex()),c.text("hsl("+Math.round(t)+", "+Math.round(e)+"%, "+Math.round(o)+"%)"),_.text("rgb("+p+", "+m+", "+g+")")}var n=chroma("cyan"),i=$(".js-colour-block"),a=$(".js-slider-hue").colour_slider({max:360,value:n.get("hsl.h"),update:function(t,e){for(var o=e.get("hsl.h"),n=100*e.get("hsl.s"),i=100*e.get("hsl.l"),a="linear-gradient(0deg",s=0;s<=361;s++)a+=" ,hsl("+s+", "+n+"%, "+i+"%)";a+=")",this.set_range_colour(a),this.set_slide_colour("hsl("+o+", "+n+"%, "+i+"%)"),this.val(t,!1)}}),s=$(".js-slider-saturation").colour_slider({value:100*n.get("hsl.s"),update:function(t,e){var o=e.get("hsl.h"),n=100*e.get("hsl.s"),i=100*e.get("hsl.l");this.set_range_colour("linear-gradient(180deg, hsl("+o+", 100%, "+i+"%), hsl("+o+", 0%, "+i+"%))"),this.set_slide_colour("hsl("+o+", "+n+"%, "+i+"%)"),this.val(t,!1)}}),r=$(".js-slider-luminosity").colour_slider({value:100*n.get("hsl.l"),update:function(t,e){var o=e.get("hsl.h"),n=100*e.get("hsl.s"),i=100*e.get("hsl.l");this.set_range_colour("linear-gradient(180deg, hsl("+o+", "+n+"%, 100%), hsl("+o+", "+n+"%, 50%), hsl("+o+", "+n+"%, 0%))"),this.set_slide_colour("hsl("+o+", "+n+"%, "+i+"%)"),this.val(t,!1)}}),l=$(".js-slider-red").colour_slider({max:255,value:n.get("rgb.r"),update:function(t,e){var o=e.get("rgb.r"),n=e.get("rgb.g"),i=e.get("rgb.b");this.set_range_colour("linear-gradient(180deg, rgb(255, "+n+", "+i+"), rgb(0, "+n+", "+i+")"),this.set_slide_colour("rgb("+o+", "+n+", "+i+")"),this.val(t,!1)}}),u=$(".js-slider-green").colour_slider({max:255,value:n.get("rgb.g"),update:function(t,e){var o=e.get("rgb.r"),n=e.get("rgb.g"),i=e.get("rgb.b");this.set_range_colour("linear-gradient(180deg, rgb("+o+", 255, "+i+"), rgb("+o+", 0, "+i+")"),this.set_slide_colour("rgb("+o+", "+n+", "+i+")"),this.val(t,!1)}}),d=$(".js-slider-blue").colour_slider({max:255,value:n.get("rgb.b"),update:function(t,e){var o=e.get("rgb.r"),n=e.get("rgb.g"),i=e.get("rgb.b");this.set_range_colour("linear-gradient(180deg, rgb("+o+", "+n+", 255), rgb("+o+", "+n+", 0)"),this.set_slide_colour("rgb("+o+", "+n+", "+i+")"),this.val(t,!1)}}),h=$(".js-colour-details-hex"),c=$(".js-colour-details-hsl"),_=$(".js-colour-details-rgb");t(),a.bind("colour-change",function(e){t()}),s.bind("colour-change",function(e){t()}),r.bind("colour-change",function(e){t()}),l.bind("colour-change",function(t){e()}),u.bind("colour-change",function(t){e()}),d.bind("colour-change",function(t){e()})}),function(t){t.fn.colour_slider=function(e){var o=this;o.defaults={min:0,max:100,decimal_places:0,value:null,update:function(t,e){this.val(t,!1)}},o.value=null;var n=t.extend({},o.defaults,e),i=o.find(".js-slider-range"),a=o.find(".js-slider-value"),s=o.find(".js-slider-slide");s.udraggable({axis:"y",containment:[-6,-8,70,471],drag:function(t,e){var a=e.offset.top+s.outerHeight()/2,r=n.max+n.min-(n.max-n.min)*a/i.height();o.val(r)}}),i.click(function(e){var a=t(this).parent().offset(),s=e.pageY-a.top,r=n.max+n.min-(n.max-n.min)*s/i.height();o.val(r)}),a.change(function(t){o.val(parseInt(a.val()))}),o.val=function(t,e){if(void 0===t)return o.value;if("number"==typeof t){if(void 0===e&&(e=!0),t<n.min||t>n.max)throw"Colour slider value out of range";return o.value!=t&&(o.value=t.toFixed(n.decimal_places),a.val(o.value),r(),e&&o.trigger("colour-change")),o}throw"Colour slider value not a number"},o.update=function(t,e){"function"==typeof n.update&&n.update.call(this,t,e)},o.set_range_colour=function(t){i.css("background",t)},o.set_slide_colour=function(t){s.css("background",t)};var r=function(t){var e=(n.max+n.min-o.val())*i.height()/(n.max-n.min);t?s.animate({top:e-s.outerHeight()/2}):s.css({top:e-s.outerHeight()/2})};return null==n.value?o.val(n.min):o.val(n.value),o}}(jQuery),function(t){var e,o,n,i,a,s,r,l,u,d,h,c,_,p,m,g,f,v=t.event.special,x={},b=!1,y=-1,w="ue_bound",$=!1,P={bound_ns_map:{},px_radius:10,ignore_select:"textarea, select, input",max_tap_ms:200,min_held_ms:300},k=[],S=1,j=4;l=function(t){var e,o=0;for(e=this.length;e;0)this[--e]===t&&o++;return o},u=function(t){var e,o=0;for(e=this.length;e;0)this[--e]===t&&(this.splice(e,1),o++,e++);return o},d=function(t){return!l.call(this,t)&&(this.push(t),!0)},h=function(e){if(e&&t.isArray(e)){if(e.remove_val)return e}else e=[];return e.remove_val=u,e.match_val=l,e.push_uniq=d,e},e=h(),o={setup:function(o,n,i){var a,s,r,l,u,d=this,c=t(d),_={};if(!t.data(this,w)){for(a={},t.extend(!0,a,P),t.data(d,w,a),u=h(n.slice(0)),u.length&&""!==u[0]||(u=["000"]),s=0;s<u.length;s++)r=u[s],r&&(_.hasOwnProperty(r)||(_[r]=!0,l=".__ue"+r,c.on("mousedown"+l,g),c.on("touchstart"+l,f)));e.push_uniq(d),b||(t(document).on("mousemove.__ue",g),t(document).on("touchmove.__ue",f),t(document).on("mouseup.__ue",g),t(document).on("touchend.__ue",f),t(document).on("touchcancel.__ue",f),b=!0)}},add:function(e){var o,n,i,a,s=this,r=t.data(s,w),l=e.namespace,u=e.type;if(r&&(o=r.bound_ns_map,o[u]||(o[u]={}),l))for(n=l.split("."),i=0;i<n.length;i++)a=n[i],o[u][a]=!0},remove:function(e){var o,n,i,a=this,s=t.data(a,w),r=s.bound_ns_map,l=e.type,u=e.namespace;if(r[l]){if(!u)return void delete r[l];for(o=u.split("."),n=0;n<o.length;n++)i=o[n],r[l][i]&&delete r[l][i];t.isEmptyObject(r[l])&&delete r[l]}},teardown:function(o){var n,i,a,s,r=this,l=t(r),u=t.data(r,w),d=u.bound_ns_map;if(t.isEmptyObject(d)){for(s=h(o),s.push_uniq("000"),n=0;n<s.length;n++)i=s[n],i&&(a=".__ue"+i,l.off("mousedown"+a),l.off("touchstart"+a),l.off("mousewheel"+a));t.removeData(r,w),e.remove_val(this),0===e.length&&(t(document).off("mousemove.__ue"),t(document).off("touchmove.__ue"),t(document).off("mouseup.__ue"),t(document).off("touchend.__ue"),t(document).off("touchcancel.__ue"),b=!1)}}},c=function(e){var o,n=+new Date,a=e.motion_id,s=e.motion_map,r=e.bound_ns_map;delete s.tapheld_toid,s.do_allow_held&&(s.px_end_x=s.px_start_x,s.px_end_y=s.px_start_y,s.ms_timestop=n,s.ms_elapsed=n-s.ms_timestart,r.uheld&&(o=t.Event("uheld"),t.extend(o,s),t(s.elem_bound).trigger(o)),r.uheldstart?(o=t.Event("uheldstart"),t.extend(o,s),t(s.elem_bound).trigger(o),i=a):delete x[a])},_=function(e){var o,n,i,l=e.motion_id,u=e.event_src,d=e.request_dzoom,h=t.data(e.elem,w),_=h.bound_ns_map,p=t(u.target),m=!1;if(!x[l]&&(!d||_.uzoomstart)&&!p.is(h.ignore_select)){for(u.preventDefault(),n=k.pop();n;)p.is(n.selector_str)||t(e.elem).is(n.selector_str)?n.callback_match&&n.callback_match(e):n.callback_nomatch&&n.callback_nomatch(e),n=k.pop();return o={do_allow_tap:!!_.utap,do_allow_held:!(!_.uheld&&!_.uheldstart),elem_bound:e.elem,elem_target:u.target,ms_elapsed:0,ms_timestart:u.timeStamp,ms_timestop:void 0,option_map:h,orig_target:u.target,px_current_x:u.clientX,px_current_y:u.clientY,px_end_x:void 0,px_end_y:void 0,px_start_x:u.clientX,px_start_y:u.clientY,timeStamp:u.timeStamp},x[l]=o,_.uzoomstart&&(d?a=l:s?r||(r=l,i=t.Event("uzoomstart"),m=!0):s=l,m)?(i=t.Event("uzoomstart"),o.px_delta_zoom=0,t.extend(i,o),void t(o.elem_bound).trigger(i)):void((_.uheld||_.uheldstart)&&(o.tapheld_toid=setTimeout(function(){c({motion_id:l,motion_map:o,bound_ns_map:_})},h.min_held_ms)))}},p=function(e){var o,l,u,d,h,c,_,p,m,g=e.motion_id,f=e.event_src,v=!1;if(x[g])return f.preventDefault(),o=x[g],l=o.option_map,u=l.bound_ns_map,o.timeStamp=f.timeStamp,o.elem_target=f.target,o.ms_elapsed=f.timeStamp-o.ms_timestart,o.px_delta_x=f.clientX-o.px_current_x,o.px_delta_y=f.clientY-o.px_current_y,o.px_current_x=f.clientX,o.px_current_y=f.clientY,o.px_tdelta_x=o.px_start_x-f.clientX,o.px_tdelta_y=o.px_start_y-f.clientY,d=Math.abs(o.px_tdelta_x)>l.px_radius||Math.abs(o.px_tdelta_y)>l.px_radius,o.timeStamp=f.timeStamp,d&&(o.do_allow_tap=!1,o.do_allow_held=!1),o.ms_elapsed>l.max_tap_ms&&(o.do_allow_tap=!1),s&&r&&(g===s||g===r)?(x[g]=o,p=x[s],m=x[r],c=Math.floor(Math.sqrt(Math.pow(p.px_current_x-m.px_current_x,2)+Math.pow(p.px_current_y-m.px_current_y,2))+.5),_=y===-1?0:(c-y)*j,y=c,v=!0):a===g&&u.uzoommove&&(_=o.px_delta_y*S,v=!0),v?(h=t.Event("uzoommove"),o.px_delta_zoom=_,t.extend(h,o),void t(o.elem_bound).trigger(h)):i===g?void(u.uheldmove&&(h=t.Event("uheldmove"),t.extend(h,o),t(o.elem_bound).trigger(h))):n===g?void(u.udragmove&&(h=t.Event("udragmove"),t.extend(h,o),t(o.elem_bound).trigger(h))):void(!u.udragstart||o.do_allow_tap!==!1||o.do_allow_held!==!1||n&&i||(n=g,h=t.Event("udragstart"),t.extend(h,o),t(o.elem_bound).trigger(h),o.tapheld_toid&&(clearTimeout(o.tapheld_toid),delete o.tapheld_toid)))},m=function(e){var o,l,u,d,h=e.motion_id,c=e.event_src,_=!1;$=!1,x[h]&&(o=x[h],l=o.option_map,u=l.bound_ns_map,o.elem_target=c.target,o.ms_elapsed=c.timeStamp-o.ms_timestart,o.ms_timestop=c.timeStamp,o.px_current_x&&(o.px_delta_x=c.clientX-o.px_current_x,o.px_delta_y=c.clientY-o.px_current_y),o.px_current_x=c.clientX,o.px_current_y=c.clientY,o.px_end_x=c.clientX,o.px_end_y=c.clientY,o.px_tdelta_x=o.px_start_x-o.px_end_x,o.px_tdelta_y=o.px_start_y-o.px_end_y,o.timeStamp=c.timeStamp,o.tapheld_toid&&(clearTimeout(o.tapheld_toid),delete o.tapheld_toid),u.utap&&o.ms_elapsed<=l.max_tap_ms&&o.do_allow_tap&&(d=t.Event("utap"),t.extend(d,o),t(o.elem_bound).trigger(d)),h===n&&(u.udragend&&(d=t.Event("udragend"),t.extend(d,o),t(o.elem_bound).trigger(d)),n=void 0),h===i&&(u.uheldend&&(d=t.Event("uheldend"),t.extend(d,o),t(o.elem_bound).trigger(d)),i=void 0),h===a?(_=!0,a=void 0):h===s&&(r?(s=r,r=void 0,_=!0):s=void 0,y=-1),h===r&&(r=void 0,y=-1,_=!0),_&&u.uzoomend&&(d=t.Event("uzoomend"),o.px_delta_zoom=0,t.extend(d,o),t(o.elem_bound).trigger(d)),delete x[h])},f=function(t){var e,o,n,i,a=this,s=+new Date,r=t.originalEvent,l=r?r.changedTouches||[]:[],u=l.length;switch($=!0,t.timeStamp=s,t.type){case"touchstart":i=_;break;case"touchmove":i=p;break;case"touchend":case"touchcancel":i=m;break;default:i=null}if(i)for(e=0;e<u;e++)o=l[e],n="touch"+String(o.identifier),t.clientX=o.clientX,t.clientY=o.clientY,i({elem:a,motion_id:n,event_src:t})},g=function(t){var e,o=this,n="mouse"+String(t.button),i=!1;if($)return void t.stopImmediatePropagation();if(t.shiftKey&&(i=!0),"mousemove"!==t.type&&0!==t.button)return!0;switch(t.type){case"mousedown":e=_;break;case"mouseup":e=m;break;case"mousemove":e=p;break;default:e=null}e&&e({elem:o,event_src:t,request_dzoom:i,motion_id:n})},v.ue=v.utap=v.uheld=v.uzoomstart=v.uzoommove=v.uzoomend=v.udragstart=v.udragmove=v.udragend=v.uheldstart=v.uheldmove=v.uheldend=o,t.ueSetGlobalCb=function(t,e,o){k.push({selector_str:t||"",callback_match:e||null,callback_nomatch:o||null})}}(jQuery),function(t){"use strict";var e=Math.floor,o=Math.min,n=Math.max;window.requestAnimationFrame=window.requestAnimationFrame||function(t){return setTimeout(t,10)},window.cancelAnimationFrame=window.cancelAnimationFrame||function(t){return clearTimeout(t)};var i=function(e,o){var n=this;this.el=e,this.$el=t(e),this.options=t.extend({},t.fn.udraggable.defaults,o),this.positionElement=this.options.positionElement||this.positionElement,this.getStartPosition=this.options.getStartPosition||this.getStartPosition,this.normalisePosition=this.options.normalisePosition||this.normalisePosition,this.updatePositionFrameHandler=function(){delete n.queuedUpdate;var t=n.ui.position;n.positionElement(n.$el,n.started,t.left,t.top),n.options.dragUpdate&&n.options.dragUpdate.apply(n.el,[n.ui])},this.queuePositionUpdate=function(){n.queuedUpdate||(n.queuedUpdate=window.requestAnimationFrame(n.updatePositionFrameHandler))},this.init()};i.prototype={constructor:i,init:function(){var t=this;this.disabled=!1,this.started=!1,this.normalisePosition();var e=this.options.handle?this.$el.find(this.options.handle):this.$el;this.options.longPress?e.on("uheldstart.udraggable",function(e){t.start(e)}).on("uheldmove.udraggable",function(e){t.move(e)}).on("uheldend.udraggable",function(e){t.end(e)}):e.on("udragstart.udraggable",function(e){t.start(e)}).on("udragmove.udraggable",function(e){t.move(e)}).on("udragend.udraggable",function(e){t.end(e)})},destroy:function(){var t=this.options.handle?this.$el.find(this.options.handle):this.$el;t.off(".udraggable"),this.$el.removeData("udraggable")},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},option:function(){var t;if(0===arguments.length)return this.options;if(2===arguments.length)return void(this.options[arguments[0]]=arguments[1]);if(1===arguments.length){if("string"==typeof arguments[0])return this.options[arguments[0]];if("object"==typeof arguments[0])for(t in arguments[0])arguments[0].hasOwnProperty(t)&&(this.options[t]=arguments[0][t])}this.options.containment&&this._initContainment()},normalisePosition:function(){var t=this.$el.position();this.$el.css({position:"absolute",top:t.top,left:t.left,right:"auto",bottom:"auto"})},start:function(t){if(!this.disabled){var e=this.getStartPosition(this.$el);return this._initContainment(),this.ui={helper:this.$el,offset:{top:e.y,left:e.x},originalPosition:{top:e.y,left:e.x},position:{top:e.y,left:e.x}},this.options.longPress&&this._start(t),this._stopPropagation(t)}},move:function(t){if(!this.disabled&&(this.started||this._start(t))){var e=t.px_current_x-t.px_start_x,o=t.px_current_y-t.px_start_y,n=this.options.axis;n&&"x"===n&&(o=0),n&&"y"===n&&(e=0);var i={left:this.ui.originalPosition.left,top:this.ui.originalPosition.top};n&&"x"!==n||(i.left+=e),n&&"y"!==n||(i.top+=o),this._applyGrid(i),this._applyContainment(i);var a=this.ui.position;return i.top===a.top&&i.left===a.left||(this.ui.position.left=i.left,this.ui.position.top=i.top,this.ui.offset.left=i.left,this.ui.offset.top=i.top,this.options.drag&&this.options.drag.apply(this.el,[t,this.ui]),this.queuePositionUpdate()),this._stopPropagation(t)}},end:function(t){return(this.started||this._start(t))&&(this.$el.removeClass("udraggable-dragging"),this.started=!1,this.queuedUpdate&&window.cancelAnimationFrame(this.queuedUpdate),this.updatePositionFrameHandler(),this.options.stop&&this.options.stop.apply(this.el,[t,this.ui])),this._stopPropagation(t)},_stopPropagation:function(t){return t.stopPropagation(),t.preventDefault(),!1},_start:function(t){if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t))return this.started=!0,this.queuePositionUpdate(),this.options.start&&this.options.start.apply(this.el,[t,this.ui]),this.$el.addClass("udraggable-dragging"),!0},_mouseDistanceMet:function(t){return n(Math.abs(t.px_start_x-t.px_current_x),Math.abs(t.px_start_y-t.px_current_y))>=this.options.distance},_mouseDelayMet:function(t){return t.ms_elapsed>this.options.delay},_initContainment:function(){var e,o,n=this.options;return n.containment?n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.$el.offsetParent()),e=t(n.containment),o=e[0],void(o&&(this.containment=[0,0,e.innerWidth()-this.$el.outerWidth(),e.innerHeight()-this.$el.outerHeight()]))):void(this.containment=null)},_applyGrid:function(t){if(this.options.grid){var o=this.options.grid[0],n=this.options.grid[1];t.left=e((t.left+o/2)/o)*o,t.top=e((t.top+n/2)/n)*n}},_applyContainment:function(t){var e=this.containment;e&&(t.left=o(n(t.left,e[0]),e[2]),t.top=o(n(t.top,e[1]),e[3]))},getStartPosition:function(t){return{x:parseInt(t.css("left"),10)||0,y:parseInt(t.css("top"),10)||0}},positionElement:function(t,e,o,n){t.css({left:o,top:n})}},t.fn.udraggable=function(e){var o=Array.prototype.slice.call(arguments,1),n=[];return this.each(function(){var a=t(this),s=a.data("udraggable");if(s||(s=new i(this,e),a.data("udraggable",s)),"string"==typeof e){if("function"!=typeof s[e])throw"jquery.udraggable has no '"+e+"' method";var r=s[e].apply(s,o);void 0!==r&&n.push(r)}}),n.length>0?n[0]:this},t.fn.udraggable.defaults={axis:null,delay:0,distance:0,longPress:!1,drag:null,start:null,stop:null}}(jQuery),$("#named-colours").length>0&&$(function(){var t,e,o,n,i,a,s=$("table"),r=["name","hex","rgb.r","rgb.g","rgb.b","temperature","hsl.h","hsl.s","hsl.l","hsv.h","hsv.s","hsv.v","cmyk.c","cmyk.m","cmyk.y","cmyk.k"],l="name";window.location.hash&&(l=window.location.hash.replace("#",""),r.indexOf(l)==-1&&(l="name"));var u=[];for(t in chroma.colors)u.push(chroma(t));u.sort(function(t,e){return t.get(l)>e.get(l)?1:t.get(l)<e.get(l)?-1:0});for(t in u){e=u[t],o=$("<tr/>").appendTo(s.find("tbody:last")),o.addClass("colour-table__row"),n=$("<td/>").text(" "),n.addClass("colour-table__colour"),n.css("background-color",e.name()),o.append(n);for(a in r)i=e.get(r[a]),"number"==typeof i&&"temperature"!=r[a]&&(i=i.toPrecision(3)),n=$("<td/>").text(i),n.addClass("colour-table__"+r[a]),o.append(n)}});